<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Coupon Book for You â¤ï¸</title>
  <style>
    :root{
      --pink:#ff4d6d; --light:#ffe6f0; --ink:#382a2a; --white:#fff;
    }
    *{box-sizing:border-box}
    body{
      font-family:'Comic Sans MS', cursive, sans-serif;
      background: var(--light);
      color: var(--ink);
      margin:0; padding:0; text-align:center;
    }
    h1{color:var(--pink); margin:.2rem 0 0}
    p{margin:.3rem 0 1rem}

    /* --- CUTE COVER PAGE --- */
    #cover{
      position:fixed; inset:0; z-index:50;
      display:grid; place-items:center; padding:24px;
      background: radial-gradient(1200px 800px at 20% -10%, #ffd6e5, transparent),
                  radial-gradient(1200px 800px at 120% 110%, #ffd6e5, transparent),
                  linear-gradient(180deg, #fff0f6, #ffe6f0);
      overflow:hidden;
    }
    .cover-card{
      position:relative; max-width:720px; width:min(92%, 720px);
      background:var(--white); border-radius:28px; padding:36px 24px;
      box-shadow:0 20px 60px rgba(255,77,109,.25);
      border:3px dashed var(--pink);
    }
    .cover-title{
      font-size: clamp(1.6rem, 4vw, 2.4rem);
      line-height:1.1;
    }
    .cover-sub{
      font-size: clamp(1rem, 2.5vw, 1.2rem);
      color:#7b5b5b;
    }
    .start-btn{
      appearance:none; border:none; cursor:pointer; margin-top:18px;
      padding:14px 26px; border-radius:16px; font-size:1rem;
      background:var(--pink); color:#fff; transition:transform .15s ease, box-shadow .2s;
      box-shadow:0 8px 20px rgba(255,77,109,.35);
    }
    .start-btn:hover{ transform:translateY(-2px); box-shadow:0 12px 26px rgba(255,77,109,.45); }
    .tiny{ display:block; margin-top:8px; font-size:.85rem; color:#7b5b5b }

    /* Floating hearts */
    .heart{ position:absolute; width:22px; height:22px; transform:rotate(45deg); opacity:.9; }
    .heart:before,.heart:after{ content:""; position:absolute; width:22px; height:22px; background:var(--pink); border-radius:50%; }
    .heart:before{ left:-11px; }
    .heart:after{ top:-11px; }
    .h1{ background:var(--pink);} .h2{ background:#ff6b8a;} .h3{ background:#ff8fb0;}
    .heart, .heart:before, .heart:after{ background:currentColor; }
    .heart{ color:#ff6b8a; }
    @keyframes floatUp{ 0%{ transform:translateY(20px) scale(.8) rotate(45deg); opacity:0; }
                         10%{opacity:1}
                         100%{ transform:translateY(-120vh) scale(1.2) rotate(45deg); opacity:0; } }
    .heart{ animation: floatUp linear infinite; }

    /* fade out on open */
    .fade-out{ animation: fadeOut .6s ease forwards; }
    @keyframes fadeOut{ to{ opacity:0; visibility:hidden; } }

    /* --- MAIN CONTENT --- */
    .wrap{ padding:24px; }
    .coupon{
      background:var(--white);
      border: 2px dashed var(--pink);
      border-radius: 16px;
      padding: 20px;
      margin: 15px auto;
      width:min(90%, 720px);
      cursor: pointer;
      transition: transform 0.2s, box-shadow .2s;
      box-shadow:0 8px 20px rgba(0,0,0,.06);
    }
    .coupon:hover{ transform: translateY(-2px) scale(1.02); box-shadow:0 12px 30px rgba(0,0,0,.08); }
    .redeemed{
      background:#f1f1f1; border:2px solid #bcbcbc; color:#666; text-decoration:line-through;
    }
    .controls{ margin:8px 0 20px; }
    .btn{ margin: 8px; padding:10px 18px; border:none; border-radius:12px; background:var(--pink); color:#fff; font-size:16px; cursor:pointer; }
    .btn.secondary{ background:#888 }

    /* Countdown styles */
    #countdown { font-size:1.1rem; margin:10px 0; color:var(--pink); font-weight:bold; }

    /* Blurred word */
    .blurred { filter: blur(6px); cursor:pointer; transition:filter .3s ease; }
    .blurred:hover { filter: blur(0); }

    /* Floating birthday text */
    .floating-text { position:absolute; font-size:1.2rem; animation: floatText 10s linear infinite; left:50%; transform:translateX(-50%); white-space:nowrap; }
    @keyframes floatText {
      0% { bottom:-40px; opacity:0; }
      10% { opacity:1; }
      100% { bottom:110%; opacity:0; }
    }
  </style>
</head>
<body>
  <!-- CUTE COVER -->
  <section id="cover" aria-label="Cover">
    <div class="cover-card">
      <div style="font-size:42px;">ğŸ’ŒğŸ’–</div>
      <h1 class="cover-title">A Little Coupon Book<br/>made just for you</h1>
      <p class="cover-sub">Open to start our song and see your surprises âœ¨</p>
      <div class="floating-text">ğŸ‚ hAppY BiRTH dAy Smartie <span class="blurred">Big tiTTie</span> ğŸ‚</div>
      <div id="coverCountdown" style="margin-top:10px; font-weight:bold; color:var(--pink);">Countdown: â€”</div>
      <button class="start-btn" id="openBtn">ğŸ’ Open Coupon Book</button>
      <span class="tiny">(music plays after you press the button)</span>

      <!-- floating hearts (generated by JS for variety) -->
      <div id="hearts"></div>
    </div>
  </section>

  <main id="content" class="wrap" style="display:none">
    <h1>ğŸ Coupon Book ğŸ</h1>
    <p>For my amazing girlfriend ğŸ’•</p>
    <div id="countdown">Countdown: â€”</div>

    <div class="controls">
      <button class="btn" id="musicBtn">â–¶ï¸ Play Our Song</button>
      <button class="btn secondary" id="resetBtn">â†º Reset Coupons</button>
    </div>

    <!-- Off-screen container for the YouTube player (created on click) -->
    <div id="yt-holder" style="position:absolute; left:-9999px; top:-9999px; width:1px; height:1px; overflow:hidden"></div>

    <!-- Coupons loaded from your list -->
    <div class="coupon" data-id="1">ğŸ¤— Hug you for a long time without rushing</div>
    <div class="coupon" data-id="2">ğŸ€ Put your hair in pigtails</div>
    <div class="coupon" data-id="3">ğŸª® Wanna sit on your lap and brush your hair</div>
    <div class="coupon" data-id="4">ğŸ’… Cut your nails for you</div>
    <div class="coupon" data-id="5">ğŸ“± Clean your mail and your photos</div>
    <div class="coupon" data-id="6">ğŸ˜š Bite your cheeks</div>
    <div class="coupon" data-id="7">ğŸ›ï¸ Wanna cuddle with you</div>
    <div class="coupon" data-id="8">ğŸŒ§ï¸ Dance in the rain with you</div>
    <div class="coupon" data-id="9">ğŸ•º Slow dance in our living room</div>
    <div class="coupon" data-id="10">ğŸ‡ Adopt a rabbit with you</div>
    <div class="coupon" data-id="11">ğŸª¨ Collect cool rocks on the beach</div>
    <div class="coupon" data-id="12">ğŸ–ï¸ Have a date night with you on the beach</div>
    <div class="coupon" data-id="13">ğŸ¥ª Have a picnic date with you</div>
    <div class="coupon" data-id="14">ğŸ“¿ Make matching bracelets</div>
    <div class="coupon" data-id="15">ğŸ’ Get promise rings together</div>
    <div class="coupon" data-id="16">ğŸ‘• Buy you a shirt</div>
    <div class="coupon" data-id="17">ğŸ©² Matching underwear?</div>
    <div class="coupon" data-id="18">ğŸ–Œï¸ Put mehendi on your hands</div>
    <div class="coupon" data-id="19">ğŸ“¿ Want you to buy me earrings</div>
    <div class="coupon" data-id="20">ğŸ“¿ I want a necklace please (something to wear everyday)</div>
    <div class="coupon" data-id="21">ğŸŒ Want to travel the world with you</div>
    <div class="coupon" data-id="22">ğŸ Buy you all the gifts you want</div>
    <div class="coupon" data-id="23">ğŸ‰ Plan a big birthday party for my precious boy</div>
    <div class="coupon" data-id="24">ğŸ“¸ Teach you how to take pictures of me</div>
    <div class="coupon" data-id="25">ğŸ“· Have cute photos of us</div>
    <div class="coupon" data-id="26">ğŸ“” Make a scrapbook filled with our memories</div>
    <div class="coupon" data-id="27">ğŸ§µ Teach you how to braid my hair</div>
    <div class="coupon" data-id="28">ğŸ¨ Make paintings together</div>
    <div class="coupon" data-id="29">ğŸ® Play games together on laptops</div>
    <div class="coupon" data-id="30">ğŸ· Drink with you</div>
    <div class="coupon" data-id="31">ğŸ‘” Learn how to tie a tie for you</div>
    <div class="coupon" data-id="32">ğŸ“š Learn how to study together</div>
    <div class="coupon" data-id="33">ğŸ’… Have matching set of nails</div>
    <div class="coupon" data-id="34">ğŸ’¨ Dry your hair for you</div>
    <div class="coupon" data-id="35">ğŸš¿ Shower together</div>
    <div class="coupon" data-id="36">ğŸ•ï¸ Go to a camp and tell ghost stories</div>
    <div class="coupon" data-id="37">ğŸ¸ Learn guitar and sing songs for you</div>
    <div class="coupon" data-id="38">ğŸ§µ Sew clothes for you</div>
    <div class="coupon" data-id="39">ğŸŒ± Grow a garden with you</div>
  </main>

  <script>
    // Generate floating hearts on the cover
    (function makeHearts(){
      const container = document.getElementById('hearts');
      const colors = ['#ff4d6d','#ff6b8a','#ff8fb0','#ffa6c2'];
      for(let i=0;i<18;i++){
        const h = document.createElement('div');
        h.className = 'heart';
        const size = 14 + Math.random()*18;
        h.style.width = h.style.height = size+'px';
        h.style.left = Math.random()*100+'%';
        h.style.bottom = '-30px';
        h.style.color = colors[i%colors.length];
        h.style.animationDuration = (8+Math.random()*6)+'s';
        h.style.animationDelay = (Math.random()*4)+'s';
        container.appendChild(h);
      }
    })();

    // Coupon redeem + persistence
    const STORAGE_KEY = 'couponBook.redeemed.v1';
    let redeemedIds = [];

    function loadState(){
      try{ redeemedIds = JSON.parse(localStorage.getItem(STORAGE_KEY)||'[]'); } catch{ redeemedIds=[]; }
      redeemedIds.forEach(id=>markRedeemedById(id));
    }
    function saveState(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(redeemedIds)); }
    function markRedeemedById(id){
      const el = document.querySelector(`.coupon[data-id="${id}"]`);
      if(!el) return;
      if(!el.classList.contains('redeemed')){
        el.classList.add('redeemed');
        if(!/^âœ… Redeemed! /.test(el.innerHTML)) el.innerHTML = 'âœ… Redeemed! '+ el.innerHTML.replace(/^âœ… Redeemed!\\s*/, '');
      }
    }

    document.addEventListener('click', (e)=>{
      const c = e.target.closest('.coupon');
      if(!c) return;
      const id = c.getAttribute('data-id');
      if(!c.classList.contains('redeemed')){
        c.classList.add('redeemed');
        if(!/^âœ… Redeemed! /.test(c.innerHTML)) c.innerHTML = 'âœ… Redeemed! '+ c.innerHTML;
        if(!redeemedIds.includes(id)){ redeemedIds.push(id); saveState(); }
      }
    });

    function resetCoupons(){
      if(!confirm('Reset all coupons on this device?')) return;
      redeemedIds = []; saveState();
      document.querySelectorAll('.coupon').forEach(el=>{
        el.classList.remove('redeemed');
        el.innerHTML = el.innerHTML.replace(/^âœ… Redeemed!\\s*/, '');
      });
    }

    // YouTube: require click to create the iframe and autoplay
    function playMusic(){
      const holder = document.getElementById('yt-holder');
      if(document.getElementById('yt-iframe')) return; // already created
      const iframe = document.createElement('iframe');
      iframe.id = 'yt-iframe'; iframe.width = '1'; iframe.height = '1';
      iframe.src = 'https://www.youtube.com/embed/CFj1HXUGhaY?autoplay=1&loop=1&playlist=CFj1HXUGhaY&rel=0&playsinline=1';
      iframe.title='YouTube player'; iframe.frameBorder='0';
      iframe.allow='autoplay; encrypted-media; picture-in-picture';
      holder.appendChild(iframe);
      document.getElementById('musicBtn').textContent='ğŸ¶ Playing';
      document.getElementById('musicBtn').disabled=true;
    }

    // Cover open â†’ reveal content + start music
    document.getElementById('openBtn').addEventListener('click', ()=>{
      document.getElementById('cover').classList.add('fade-out');
      setTimeout(()=>{
        document.getElementById('cover').style.display='none';
        document.getElementById('content').style.display='block';
        window.scrollTo({top:0, behavior:'smooth'});
      }, 600);
      playMusic();
    });

    document.getElementById('musicBtn').addEventListener('click', playMusic);
    document.getElementById('resetBtn').addEventListener('click', resetCoupons);

    // init
    loadState();

    // Countdown fixed to 24 Nov 2025 00:00 (local time)
    (function setupCountdown(){
      const targetDate = new Date('2025-11-24T00:00:00').getTime();
      const ids = ['countdown','coverCountdown'];
      function update(){
        const now = Date.now();
        const diff = targetDate - now;
        let text;
        if(diff <= 0){ text = "ğŸ‰ It's the big day! ğŸ‰"; }
        else {
          const d = Math.floor(diff/(1000*60*60*24));
          const h = Math.floor((diff%(1000*60*60*24))/(1000*60*60));
          const m = Math.floor((diff%(1000*60*60))/(1000*60));
          const s = Math.floor((diff%(1000*60))/1000);
          text = `Countdown: ${d}d ${h}h ${m}m ${s}s`;
        }
        ids.forEach(id=>{
          const el = document.getElementById(id);
          if(el) el.textContent = text;
        });
      }
      update();
      setInterval(update,1000);
    })();
  </script>
</body>
</html>
